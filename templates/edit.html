{% extends "base.html" %}

{% block title %}עריכת פגישה{% endblock %}

{% block content %}
  <div class="card">

    <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:14px;">
      <div>
        <h1 style="margin:0;">עריכת פגישה</h1>
        <div class="helper" style="margin-top:6px;">
          מזהה פגישה
          {{ appointment.id }}
        </div>
      </div>

      <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
        <a class="btn btn-secondary" href="/">בחירת דיזיין</a>
        <span class="status">
          דיזיין נוכחי
          {% if theme_name == "enterprise" %}
            1
          {% elif theme_name == "soft" %}
            2
          {% elif theme_name == "pro" %}
            3
          {% elif theme_name == "mobile" %}
            4
          {% else %}
            1
          {% endif %}
        </span>
      </div>
    </div>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="helper" style="margin-bottom:12px;color:var(--warning);">
          {{ messages[0] }}
        </div>
      {% endif %}
    {% endwith %}

    <form method="post" action="/edit/{{ appointment.id }}">

      <div style="margin-bottom:14px;">
        <label class="label">מזהה</label>
        <input class="input" type="text" value="{{ appointment.id }}" readonly style="opacity:0.85;">
      </div>

      <div style="margin-bottom:14px;">
        <label class="label">נושא פגישה</label>
        <input class="input" name="title" type="text" value="{{ appointment.title }}" required>
      </div>

      <div style="margin-bottom:14px;">
        <label class="label">תאריך</label>
        <input class="input" type="text" value="{{ appointment.date }}" readonly style="opacity:0.85;">
      </div>

      <div style="margin-bottom:14px;">
        <label class="label">שעה</label>
        <input class="input" name="time_text" type="time" value="{{ appointment.time }}" required>
      </div>

      <div style="margin-bottom:14px;">
        <label class="label">מיקום</label>
        <input class="input" name="location" type="text" value="{{ appointment.location }}">
      </div>

      <div style="margin-bottom:18px;">
        <label class="label">הערות</label>
        <textarea class="input" name="notes">{{ appointment.notes }}</textarea>
      </div>

      <div style="margin-bottom:14px;">
        <label class="label">סטטוס</label>
        <input class="input" type="text" value="{{ appointment.status }}" readonly style="opacity:0.85;">
      </div>

      <div style="margin-bottom:20px;">
        <label class="label">נוצר בתאריך</label>
        <input class="input" type="text" value="{{ appointment.created_at }}" readonly style="opacity:0.85;">
      </div>

      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
        <button class="btn btn-primary" type="submit">שמור עדכון</button>
        <a class="btn btn-secondary" href="/output">חזרה לרשימה</a>
      </div>

    </form>
  </div>
{% endblock %}
